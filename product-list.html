<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <style>
        .header-link {
            font-size: 1.05rem;
            font-weight: 500;
            color: #222;
            margin-right: 8px;
            cursor: pointer;
            transition: color 0.2s;
        }
        .header-link:hover {
            color: #b71c1c !important;
            cursor: pointer;
        }
        .header-home-link:hover {
            color: #b71c1c !important;
            cursor: pointer;
        }
        body {
            font-family: 'Poppins', Arial, sans-serif;
            background: #fff;
            margin: 0;
            padding: 0;
            color: #222;
        }
        .productlist-header {
            margin-bottom: 0;
        }
        .productlist-main {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            justify-content: center;
            gap: 48px;
            width: 100vw;
            max-width: 100%;
            /* margin-top: 48px; */
        }
        .productlist-sidebar {
            min-width: 220px;
            max-width: 260px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            /* overflow-y: auto; */
            /* max-height: 340px; */
            padding-right: 8px;
            margin-bottom: 0;
        }
        .sidebar-header {
            font-size: 1.18rem;
            font-weight: 600;
            color: #222;
            margin-bottom: 18px;
        }
        .gender-checkbox-row {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 18px;
        }
        .gender-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.05rem;
            font-weight: 500;
            color: #222;
        }
        .sidebar-divider {
            width: 80%;
            height: 2px;
            background: #eee;
            margin: 18px 0 12px 0;
        }
        .sidebar-size-header {
            font-size: 1.08rem;
            font-weight: 600;
            color: #222;
            margin-bottom: 14px;
        }
        .size-btn-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .size-btn {
            background: #fff;
            color: #222;
            border: 2px solid #ccc;
            border-radius: 18px;
            padding: 8px 18px;
            font-size: 1.05rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s, color 0.2s, border 0.2s;
        }
        .size-btn.active {
            background: #222;
            color: #fff;
            border-color: #222;
        }
        .productlist-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 32px;
            min-width: 0;
        }
        .productlist-caption-row {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 32px;
            margin-top: 0;
            width: 100%;
        }
        .productlist-caption {
            font-size: 1.18rem;
            font-weight: 400;
            color: #222;
        }
        .productlist-caption .brand {
            font-weight: 700;
        }
        .productlist-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 32px;
            width: 100%;
            max-width: 900px;
        }
        .shoe-card {
            background: none;
            border: none;
            width: 260px;
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        .shoe-img-box {
            position: relative;
            width: 260px;
            height: 170px;
            border-radius: 0;
            overflow: hidden;
        }
        .shoe-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .badge-new {
            position: absolute;
            top: 16px;
            left: 16px;
            background: #222;
            color: #fff;
            font-size: 0.98rem;
            font-weight: 500;
            border-radius: 12px;
            padding: 4px 18px;
            z-index: 2;
        }
        .shoe-info-box {
            background: #f7f7f7;
            border-radius: 0;
            padding: 16px 18px 12px 18px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .shoe-info-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.08rem;
            font-weight: 500;
            color: #222;
        }
        .shoe-brand {
            font-weight: 600;
        }
        .shoe-price {
            font-weight: 500;
            color: #222;
        }
        .shoe-price-old {
            text-decoration: line-through;
            color: #888;
            margin-right: 8px;
            font-size: 0.98rem;
        }
    </style>
    </style>
</head>
<body class="productlist-body" style="min-height:100vh;display:flex;flex-direction:column;">
    <!-- Navigation Bar (copied from home.html) -->
    <nav class="homepage-header" style="position:sticky;top:0;z-index:100;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.04);padding:0 40px;display:flex;align-items:center;justify-content:space-between;height:72px;padding-left:46px;">
    <div style="display:flex;align-items:center;gap:24px;">
            <a href="home.html" style="display:flex;align-items:center;gap:30px;text-decoration:none;color:inherit;">
                <img src="IMAGE/SHOEPAOLOGO.png" alt="SHOEPAO Logo" style="height:42px;width:auto;cursor:pointer;">
                <span class="header-caption" style="font-size:1.18rem;font-weight:600;color:#b71c1c;cursor:pointer;">Shoe Pao Footwear</span>
            </a>
            <span class="header-link" onclick="goToSale()">Sale</span>
            <span class="header-link" onclick="goToNewArrivals()">New Arrivals</span>
            <span class="header-link" onclick="goToBrands()">Brands</span>
            <span class="header-link" onclick="goToProductList()">Shop All</span>
        </div>
        <div style="display:flex;align-items:center;gap:18px;">
            <button class="header-icon-btn" onclick="toggleSearchBox()" style="background:none;border:none;padding:6px;display:flex;align-items:center;cursor:pointer;"><img src="IMAGE/SEARCHICON.png" class="header-icon" alt="Search" style="width:26px;height:26px;"></button>
            <button class="header-icon-btn" onclick="goToUserPage()" style="background:none;border:none;padding:6px;display:flex;align-items:center;cursor:pointer;"><img src="IMAGE/USERICON.png" class="header-icon" alt="User" style="width:26px;height:26px;"></button>
            <button class="header-icon-btn" id="cartToggleBtn" style="background:none;border:none;padding:6px;display:flex;align-items:center;cursor:pointer;"><img src="IMAGE/CARTICON.png" class="header-icon" alt="Cart" style="width:26px;height:26px;"></button>
        </div>
        <div class="search-box" id="searchBox" style="display:none;position:absolute;top:72px;right:80px;background:#fff;border:1px solid #ccc;border-radius:8px;padding:8px 16px;z-index:101;">
            <input type="text" class="search-input" id="searchInput" placeholder="Search products..." onkeydown="searchKeyDown(event)" style="font-family:'Poppins',Arial,sans-serif;font-size:1rem;border:none;outline:none;width:220px;padding:6px 0;">
        </div>
    </nav>
    <main class="productlist-main-content" style="flex:1 1 auto;">
        <div class="productlist-main">
            <!-- Sidebar -->
            <aside class="productlist-sidebar" style="padding-left:24px;">
                <div class="sidebar-section">
                    <div class="sidebar-header" style="font-size:1.18rem;font-weight:600;color:#222;margin-bottom:18px;">Gender</div>
                    <div class="gender-checkbox-row" style="display:flex;flex-direction:column;gap:10px;margin-bottom:18px;">
                        <label class="gender-checkbox" style="display:flex;align-items:center;gap:8px;font-size:1.05rem;font-weight:500;color:#222;">
                            <input type="checkbox" id="genderMen" checked onchange="filterGender()" style="accent-color:#000;width:18px;height:18px;">
                            <span style="color:#222;">Men</span>
                        </label>
                        <label class="gender-checkbox" style="display:flex;align-items:center;gap:8px;font-size:1.05rem;font-weight:500;color:#222;">
                            <input type="checkbox" id="genderWomen" checked onchange="filterGender()" style="accent-color:#000;width:18px;height:18px;">
                            <span style="color:#222;">Women</span>
                        </label>
                    </div>
                    <div class="sidebar-divider" style="width:80%;height:2px;background:#eee;margin:18px 0 12px 0;"></div>
                </div>
                <div class="sidebar-section">
                    <div class="sidebar-size-header" style="font-size:1.08rem;font-weight:600;color:#222;margin-bottom:14px;">Size</div>
                    <div class="size-btn-row" id="sizeBtnRow" style="display:flex;flex-wrap:wrap;gap:10px;">
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">4.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">5.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">6</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">6.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">7</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">7.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">8</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">8.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">9</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">9.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">10</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">10.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">11</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">11.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">12</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">12.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">13</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">13.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">14</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">14.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">15</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">15.5</button>
                        <button class="size-btn" style="width:56px;height:38px;display:flex;align-items:center;justify-content:center;font-family:'Poppins',Arial,sans-serif;" onclick="toggleSize(this)">16</button>
                    </div>
                </div>
            </aside>
            <!-- Main Content -->
            <section class="productlist-content">
                <div class="productlist-caption-row">
                    <span class="productlist-caption">Showing 5 products for <span class="brand">NIKE</span></span>
                </div>
                <div class="productlist-grid" id="productGrid">
                    <div class="shoe-card" data-gender="Men" data-size="8" style="cursor:pointer;" onclick="viewProduct('Nike','Nike Airmax TN Aqua Blue','P1,299.00','IMAGE/NIKE1.png','New')">
                        <div class="shoe-img-box">
                            <img src="IMAGE/NIKE1.png" class="shoe-img" alt="Nike Airmax TN Aqua Blue">
                            <span class="badge-new">New</span>
                        </div>
                        <div class="shoe-info-box">
                            <div class="shoe-info-top">
                                <span class="shoe-brand">Nike</span>
                                <span class="shoe-price">P1,299.00</span>
                            </div>
                            <div class="shoe-info-bottom">Nike Airmax TN Aqua Blue</div>
                        </div>
                    </div>
                    <div class="shoe-card" data-gender="Men" data-size="9" style="cursor:pointer;" onclick="viewProduct('Nike','Nike Airmax Black','P2,395.00','IMAGE/NIKE2.png','New')">
                        <div class="shoe-img-box">
                            <img src="IMAGE/NIKE2.png" class="shoe-img" alt="Nike Airmax Black">
                            <span class="badge-new">New</span>
                        </div>
                        <div class="shoe-info-box">
                            <div class="shoe-info-top">
                                <span class="shoe-brand">Nike</span>
                                <span class="shoe-price">P2,395.00</span>
                            </div>
                            <div class="shoe-info-bottom">Nike Airmax Black</div>
                        </div>
                    </div>
                    <div class="shoe-card" data-gender="Women" data-size="7" style="cursor:pointer;" onclick="viewProduct('Nike','Nike GT CUT 2 LEAP HIGH','P1,999.00','IMAGE/NIKE3.png','New')">
                        <div class="shoe-img-box">
                            <img src="IMAGE/NIKE3.png" class="shoe-img" alt="Nike GT CUT 2 LEAP HIGH">
                        </div>
                        <div class="shoe-info-box">
                            <div class="shoe-info-top">
                                <span class="shoe-brand">Nike</span>
                                <span class="shoe-price-old">P2,395.00</span><span class="shoe-price">P1,999.00</span>
                            </div>
                            <div class="shoe-info-bottom">Nike GT CUT 2 LEAP HIGH</div>
                        </div>
                    </div>
                    <div class="shoe-card" data-gender="Women" data-size="8" style="cursor:pointer;" onclick="viewProduct('Nike','Nike Airmax White','P2,199.00','IMAGE/NIKE4.png','New')">
                        <div class="shoe-img-box">
                            <img src="IMAGE/NIKE4.png" class="shoe-img" alt="Nike Airmax White">
                        </div>
                        <div class="shoe-info-box">
                            <div class="shoe-info-top">
                                <span class="shoe-brand">Nike</span>
                                <span class="shoe-price">P2,199.00</span>
                            </div>
                            <div class="shoe-info-bottom">Nike Airmax White</div>
                        </div>
                    </div>
                    <div class="shoe-card" data-gender="Men" data-size="10" style="cursor:pointer;" onclick="viewProduct('Nike','Nike Airmax Red','P2,299.00','IMAGE/NIKE5.png','New')">
                        <div class="shoe-img-box">
                            <img src="IMAGE/NIKE5.png" class="shoe-img" alt="Nike Airmax Red">
                        </div>
                        <div class="shoe-info-box">
                            <div class="shoe-info-top">
                                <span class="shoe-brand">Nike</span>
                                <span class="shoe-price">P2,299.00</span>
                            </div>
                            <div class="shoe-info-bottom">Nike Airmax Red</div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <script>
    function viewProduct(brand, name, price, img, badge) {
        localStorage.setItem('productBrand', brand);
        localStorage.setItem('productTitle', name);
        localStorage.setItem('productPrice', price);
        localStorage.setItem('productImg', img);
        localStorage.setItem('productBadge', badge);
        window.location.href = 'product-view.html';
    }
    // Add to Cart button logic
    document.addEventListener('DOMContentLoaded', function() {
    });
    // Navigation bar functions (copied from home.html)
    function goToHomeTop() { window.location.href = 'home.html#top'; }
    function goToSale() { window.location.href = 'home.html#sale'; }
    function goToNewArrivals() { window.location.href = 'home.html#new-arrivals'; }
    function goToBrands() { window.location.href = 'home.html#brands'; }
    function goToProductList() { window.location.href = 'product-list.html'; }
    function goToUserPage() { window.location.href = 'profile.html'; }
    function goToCartPage() { window.location.href = 'cart.html'; }
    function toggleSearchBox() {
        var box = document.getElementById('searchBox');
        box.style.display = (box.style.display === 'block') ? 'none' : 'block';
        if (box.style.display === 'block') {
            document.getElementById('searchInput').focus();
        }
    }
    function searchKeyDown(e) {
        if (e.key === 'Enter') {
            var val = document.getElementById('searchInput').value.trim();
            if (val) {
                window.location.href = 'product-list.html?search=' + encodeURIComponent(val);
            }
        }
    }
    // Gender filter
    function filterGender() {
        var men = document.getElementById('genderMen').checked;
        var women = document.getElementById('genderWomen').checked;
        var cards = document.querySelectorAll('.shoe-card');
        cards.forEach(card => {
            var gender = card.getAttribute('data-gender');
            if ((men && gender === 'Men') || (women && gender === 'Women') || (men && women) || (!men && !women)) {
                card.style.display = '';
            } else {
                card.style.display = 'none';
            }
        });
    }
    // Size filter
    function toggleSize(btn) {
        btn.classList.toggle('active');
        var activeSizes = Array.from(document.querySelectorAll('.size-btn.active')).map(b => b.textContent.trim());
        var cards = document.querySelectorAll('.shoe-card');
        cards.forEach(card => {
            var size = card.getAttribute('data-size');
            if (activeSizes.length === 0 || activeSizes.includes(size)) {
                card.style.display = '';
            } else {
                card.style.display = 'none';
            }
        });
    }
    // Initial filter: show all
    window.addEventListener('DOMContentLoaded', function() {
        filterGender();
    });
    </script>



    <footer>
      <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:48px;">
        <div style="flex:2;min-width:0;width:80%;">
          <div style="font-size:1.3rem;font-weight:600;margin-bottom:18px;">Have questions?</div>
          <div style="font-size:1.05rem;font-weight:400;margin-bottom:12px;">Contact us at our facebook page</div>
          <div style="font-size:1.05rem;font-weight:400;margin-bottom:24px;margin-top:18px;">Or via phone/email</div>
          <div style="display:flex;flex-direction:column;">
            <span style="width:93%;height:2px;background:#444;margin:18px 0 12px 0;display:inline-block;"></span>
            <span style="font-size:0.92rem;color:#bbb;display:inline-block;width:93%;">All product names, logos, brands, trademarks, and registered trademarks are the property of their respective owners. All company, product, and service names used on this website are for identification purposes only. Use of these names, logos, and brands does not imply endorsement or affiliation.<br /><br />© 2025 Shoe Pao Footwear. All rights reserved.</span>
          </div>
        </div>
        <div style="flex:1;display:flex;flex-direction:column;gap:12px;align-items:flex-end;min-width:180px;justify-content:flex-start;margin-top:18px;padding-right:14.1%;">
          <span style="font-size:1.05rem;margin-bottom:2px;">About Us</span>
          <span style="font-size:1.05rem;margin-bottom:2px;">Shipping</span>
          <span style="font-size:1.05rem;margin-bottom:2px;">Returns & Exchanges</span>
          <span style="font-size:1.05rem;margin-bottom:2px;">Privacy Policy</span>
          <span style="font-size:1.05rem;margin-bottom:2px;">Terms of Service</span>
        </div>
      </div>
    </footer>

    <!-- ===== ADDED: Cart Overlay + Sidebar HTML (from product-view.html) ===== -->
    <div id="cartOverlay" class="cart-overlay" aria-hidden="true"></div>
    <aside id="cartSidebar" class="cart-sidebar" aria-hidden="true" role="complementary">
        <div class="cart-header-row">
            <div>
                <span class="cart-header-title">Cart (<span id="cartCount">0</span>)</span>
            </div>
            <button id="closeCartBtn" class="cart-close" aria-label="Close cart"><img src="IMAGE/X.png" alt="Close" style="width:20px;height:20px;"></button>
        </div>
        <div class="cart-divider"></div>
        <div id="cartItems" class="cart-items">
            <div class="cart-empty">Your cart is empty</div>
        </div>
        <div class="cart-divider"></div>
        <div class="cart-subtotal-row">
            <span class="cart-subtotal-label">Subtotal</span>
            <span id="cartSubtotal" class="cart-subtotal-value">₱0.00</span>
        </div>
        <button id="checkoutBtn" class="cart-checkout-btn">Checkout</button>
    </aside>
    <!-- ===== ADDED: Cart Sidebar Behavior (from product-view.html) ===== -->
    <script>
    (function(){
        // cart data structure
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
        // helpers
        function parsePriceToNumber(priceText) {
            if (!priceText) return 0;
            var v = priceText.replace(/[^0-9.]/g, '');
            return parseFloat(v || 0);
        }
        function formatPHP(amount) {
            try {
                return new Intl.NumberFormat('en-PH', { style: 'currency', currency: 'PHP' }).format(amount);
            } catch (e) {
                return '₱' + Number(amount).toFixed(2);
            }
        }
        function saveCartToLocalStorage() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }
        // DOM refs
        const cartOverlay = document.getElementById('cartOverlay');
        const cartSidebar = document.getElementById('cartSidebar');
        const cartItemsContainer = document.getElementById('cartItems');
        const cartCountEl = document.getElementById('cartCount');
        const cartSubtotalEl = document.getElementById('cartSubtotal');
        const closeCartBtn = document.getElementById('closeCartBtn');
        const checkoutBtn = document.getElementById('checkoutBtn');
        // find nav cart button (the one with image alt="Cart")
        function getNavCartButton() {
            const img = document.querySelector('img[alt="Cart"]');
            if (!img) return null;
            return img.closest('button');
        }
        function openCartSidebar() {
            cartOverlay.classList.add('show');
            cartSidebar.classList.add('open');
            document.body.style.overflow = 'hidden';
            cartSidebar.setAttribute('aria-hidden', 'false');
            cartOverlay.setAttribute('aria-hidden', 'false');
        }
        function closeCartSidebar() {
            cartOverlay.classList.remove('show');
            cartSidebar.classList.remove('open');
            document.body.style.overflow = '';
            cartSidebar.setAttribute('aria-hidden', 'true');
            cartOverlay.setAttribute('aria-hidden', 'true');
        }
        function renderCart() {
            cartItemsContainer.innerHTML = '';
            if (cart.length === 0) {
                const empty = document.createElement('div');
                empty.className = 'cart-empty';
                empty.textContent = 'Your cart is empty';
                cartItemsContainer.appendChild(empty);
                cartCountEl.textContent = 0;
                cartSubtotalEl.textContent = formatPHP(0);
                saveCartToLocalStorage();
                return;
            }
            let subtotal = 0;
            let totalQty = 0;
            cart.forEach((item, index) => {
                const qty = (typeof item.qty === 'number') ? item.qty : (typeof item.quantity === 'number' ? item.quantity : 1);
                subtotal += item.price * qty;
                totalQty += qty;
                const box = document.createElement('div');
                box.className = 'cart-item-box';
                const img = document.createElement('img');
                img.className = 'cart-item-img';
                img.src = item.image || 'IMAGE/NIKE1.png';
                img.alt = item.title || 'Product';
                const middle = document.createElement('div');
                middle.className = 'cart-item-middle';
                const title = document.createElement('div');
                title.className = 'cart-item-title';
                title.textContent = item.title;
                const brand = document.createElement('div');
                brand.className = 'cart-item-brand';
                brand.textContent = item.brand;
                const size = document.createElement('div');
                size.className = 'cart-item-size';
                size.textContent = 'Size: ' + (item.size || '');
                const qtyControls = document.createElement('div');
                qtyControls.className = 'cart-quantity-controls';
                const lessenBtn = document.createElement('button');
                lessenBtn.className = 'qty-btn decrease';
                lessenBtn.setAttribute('data-index', index);
                const lessenImg = document.createElement('img');
                lessenImg.src = 'IMAGE/LessenBTN.png';
                lessenImg.alt = '-';
                lessenImg.style.width = '22px';
                lessenImg.style.height = '22px';
                lessenBtn.appendChild(lessenImg);
                const qtyText = document.createElement('span');
                qtyText.className = 'cart-item-qty';
                qtyText.textContent = qty;
                const addBtn = document.createElement('button');
                addBtn.className = 'qty-btn increase';
                addBtn.setAttribute('data-index', index);
                const addImg = document.createElement('img');
                addImg.src = 'IMAGE/AddBTN.png';
                addImg.alt = '+';
                addImg.style.width = '22px';
                addImg.style.height = '22px';
                addBtn.appendChild(addImg);
                qtyControls.appendChild(lessenBtn);
                qtyControls.appendChild(qtyText);
                qtyControls.appendChild(addBtn);
                middle.appendChild(title);
                middle.appendChild(brand);
                middle.appendChild(size);
                middle.appendChild(qtyControls);
                const removeBtn = document.createElement('button');
                removeBtn.className = 'cart-item-remove';
                removeBtn.setAttribute('data-index', index);
                const trashImg = document.createElement('img');
                trashImg.src = 'IMAGE/TrashIcon.png';
                trashImg.alt = 'Remove';
                trashImg.style.width = '18px';
                trashImg.style.height = '18px';
                removeBtn.appendChild(trashImg);
                const priceEl = document.createElement('div');
                priceEl.className = 'cart-item-price';
                priceEl.textContent = formatPHP(item.price * qty);
                box.appendChild(img);
                box.appendChild(middle);
                box.appendChild(removeBtn);
                box.appendChild(priceEl);
                cartItemsContainer.appendChild(box);
            });
            cartCountEl.textContent = totalQty;
            cartSubtotalEl.textContent = formatPHP(subtotal);
            attachCartEvents();
        }
        function attachCartEvents() {
            // decrease
            document.querySelectorAll('.qty-btn.decrease').forEach(btn => {
                btn.onclick = function(e) {
                    const idx = parseInt(btn.getAttribute('data-index'), 10);
                    if (!isNaN(idx) && cart[idx]) {
                        // Use qty if present, else quantity
                        if (typeof cart[idx].qty === 'number') {
                            if (cart[idx].qty > 1) {
                                cart[idx].qty--;
                            }
                        } else if (typeof cart[idx].quantity === 'number') {
                            if (cart[idx].quantity > 1) {
                                cart[idx].quantity--;
                            }
                        }
                        renderCart();
                        saveCartToLocalStorage();
                    }
                };
            });
            // increase
            document.querySelectorAll('.qty-btn.increase').forEach(btn => {
                btn.onclick = function(e) {
                    const idx = parseInt(btn.getAttribute('data-index'), 10);
                    if (!isNaN(idx) && cart[idx]) {
                        if (typeof cart[idx].qty === 'number') {
                            cart[idx].qty++;
                        } else if (typeof cart[idx].quantity === 'number') {
                            cart[idx].quantity++;
                        }
                        renderCart();
                        saveCartToLocalStorage();
                    }
                };
            });
            // remove
            document.querySelectorAll('.cart-item-remove').forEach(btn => {
                btn.onclick = function(e) {
                    const idx = parseInt(btn.getAttribute('data-index'), 10);
                    if (!isNaN(idx)) {
                        cart.splice(idx, 1);
                        renderCart();
                        saveCartToLocalStorage();
                    }
                };
            });
        }
        // Hook nav cart button (remove its inline navigation and replace with open sidebar)
        document.addEventListener('DOMContentLoaded', function() {
            const navCartBtn = getNavCartButton();
            if (navCartBtn) {
                navCartBtn.removeAttribute('onclick');
                navCartBtn.addEventListener('click', function(e){
                    e.preventDefault();
                    openCartSidebar();
                });
            }
            // hook close buttons and overlay
            if (closeCartBtn) closeCartBtn.addEventListener('click', closeCartSidebar);
            if (cartOverlay) cartOverlay.addEventListener('click', closeCartSidebar);
            renderCart();
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', function(){
                    window.location.href = 'checkout.html';
                });
            }
        });
    })();
    </script>
    <script src="cart-storage.js"></script>
</body>
</html>
